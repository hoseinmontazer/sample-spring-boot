<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout
                    pattern="%style{%d{ISO8601}} | %highlight{%-5level}| [%style{%t}{bright,blue}] | %style{%C{1.}}{bright,yellow} | %msg%xThrowable{separator(|)}%n" />

        </Console>

        <RollingFile name="user"
                     fileName="./logs/user.log"
                     filePattern="./logs/user-%d{-dd-MM-yyyy}-%i.log.gz">
            <PatternLayout
                    pattern="%d{ISO8601} | %p | [%t] | %C{1.} | %msg%xThrowable{separator(|)}%n" />

            <Policies>
                <SizeBasedTriggeringPolicy
                        size="100 MB" />
                <TimeBasedTriggeringPolicy />
            </Policies>
            <DefaultRolloverStrategy max="2147483647"/>
        </RollingFile>

        <RollingFile name="service"
                     fileName="./logs/service.log"
                     filePattern="./logs/service-%d{-dd-MM-yyyy}-%i.log.gz">
            <PatternLayout
                    pattern="%d{ISO8601} | %p | [%t] | %C{1.} | %msg%xThrowable{separator(|)}%n" />

            <Policies>
                <SizeBasedTriggeringPolicy
                        size="100 MB" />
                <TimeBasedTriggeringPolicy />
            </Policies>
            <DefaultRolloverStrategy max="2147483647">
<!--                <Delete basePath="${baseDir}" maxDepth="2">-->
<!--                    <IfFileName glob="*/service-${env:LOG_FILE_POSTFIX}-*.log.gz" />-->
<!--                    <IfLastModified age="7d" />-->
<!--                </Delete>-->
            </DefaultRolloverStrategy>
        </RollingFile>


<!--        <RollingFile name="trace"-->
<!--                     fileName="./logs/trace-${env:LOG_FILE_POSTFIX}.log"-->
<!--                     filePattern="./logs/trace-${env:LOG_FILE_POSTFIX}-%d{-dd-mm-yyyy}-%i.log.gz">-->
<!--            <PatternLayout-->
<!--                    pattern="%d{ISO8601} | %p | [%t] | %C{1.} | %msg%xThrowable{separator(|)}%n" />-->

<!--            <Policies>-->
<!--                <SizeBasedTriggeringPolicy-->
<!--                        size="50 MB" />-->
<!--                <TimeBasedTriggeringPolicy />-->
<!--            </Policies>-->
<!--            <DefaultRolloverStrategy max="2147483647">-->
<!--                <Delete basePath="${baseDir}" maxDepth="2">-->
<!--                    <IfFileName glob="*/trace-${env:LOG_FILE_POSTFIX}-*.log.gz" />-->
<!--                    <IfLastModified age="7d" />-->
<!--                </Delete>-->
<!--            </DefaultRolloverStrategy>-->
<!--        </RollingFile>-->
    </Appenders>



    <Loggers>
        <!--        &lt;!&ndash; LOG everything at INFO level &ndash;&gt;-->
        <Root level="info">
            <!--            <AppenderRef ref="Console"/>-->
            <AppenderRef ref="Console"/>
<!--            <AppenderRef ref="TraceRollingFile" level="trace"/>-->
        </Root>


        <Logger name="user" level="info">
            <AppenderRef ref="user" />
            <!--            <AppenderRef ref="Console" />-->
        </Logger>

        <Logger name="service" level="info">
            <AppenderRef ref="service" />
            <!--            <AppenderRef ref="Console" />-->
        </Logger>

<!--        <Logger name="trace" level="trace">-->
<!--            <AppenderRef ref="trace" />-->
<!--            &lt;!&ndash;            <AppenderRef ref="Console" />&ndash;&gt;-->
<!--        </Logger>-->
    </Loggers>

</Configuration>
